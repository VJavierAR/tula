<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record model="ir.ui.view" id="view_pedido_abierto_wizard">
            <field name="model">pedido.abierto.wizard</field>
            <field name="arch" type="xml">
                <form string="Pedido abierto">
                    <group col="6">
                        <group colspan="1">
                        </group>
                        <group colspan="4">
                            <h2>
                                <field name="alerta_text" readonly="1" attrs="{'invisible': [('alerta_text', '=', False)]}" force_save="1"/>
                            </h2>
                        </group>
                        <group colspan="1">
                        </group>
                    </group>
                    <field name="alerta" force_save="1" invisible="1"/>
                    <field name="pedido_abierto_id" invisible="1"/>
                    <field name='lineas_pedidos' string=' '>


                        <tree class="slae_line_edit" editable="bottom" create="0">

                            <!-- We do not display the type because we don't want the user to be bothered with that information if he has no section or note. -->
                            <field name="linea_relacionada" invisible="1"/>
                            <field name="company_id" invisible="1"/>

                            <field name="product_id"
                                   options="{'no_open': True}" force_save="1"
                                   widget="product_configurator"
                                   readonly="1"
                            />
                            <!--context="{                                             'partner_id': parent.partner_id,                                             'quantity': product_uom_qty,                                             'pricelist': parent.pricelist_id,                                             'uom':product_uom,                                             'company_id': parent.company_id,                                             'default_lst_price': price_unit,                                             'default_description_sale': name                                         }"-->

                            <field name="pedido_abierto_rel" invisible="1"/>
                            <field name="default_code_product" readonly="1" optional="show" invisible="1"/>
                            <field name="pedido_cliente" optional="show"/>
                            <field name="codigo_alterno" optional="show"/>
                            <field name="codigo_cliente" readonly="1" optional="show"/>
                            <field name="name" widget="section_and_note_text" optional="show" />
                            <field name="order_partner_id" readonly="1" optional="show" />

                            <field name="fecha_programada" optional="show" readonly="1"/>
                            <field name="price_unit" optional="show" readonly="1"/>
                            <field name="cantidad_restante" readonly="1" optional="show"/>
                            <field name="product_uom" force_save="1" readonly="1"
                                   options="{'no_open': True}"
                                   optional="show"/>
                            <field name="cantidad_pedida_wizard" force_save="1" />
                            <field name="product_uom_qty" invisible="1"/>



                            <field name="cantidad_reservada" force_save="1" optional="show" readonly="1" invisible="1"/>
                            <field name="cantidad_facturada" readonly="1" invisible="1"/>
                            <field name="cantidad_entregada" readonly="1" invisible="1"/>
                            <field name="cantidad_pedida" readonly="1" invisible="1"/>
                            <field name="tax_id" widget="many2many_tags"
                                   optional="show" invisible="1"/>
                            <field name="discount"
                                   groups="product.group_discount_per_so_line" optional="show" invisible="1"/>
                            <field name="company_id" invisible="1"/>
                            <field name="creado_desde_pedido_abierto" invisible="1"/>
                            <field name="es_de_sale_order" force_save="1" invisible="1"/>

                        </tree>
                        <form>
                            <field name="linea_relacionada"/>
                            <field name="company_id" invisible="1"/>
                        </form>

                    </field>

                    <footer>
                        <button name="crear_orden" string="Crear y abrir orden directa" type="object" class="oe_highlight" attrs="{'invisible': [('alerta', '=', True)]}"/>
                        <button special="cancel" string="Cerrar" class="oe_highlight"/>
                    </footer>

                </form>
            </field>
        </record>


    </data>
</odoo>